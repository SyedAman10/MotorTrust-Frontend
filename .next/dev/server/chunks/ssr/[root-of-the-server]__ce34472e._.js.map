{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/erpai/projects/MotorTrust-Frontend/lib/auth.ts"],"sourcesContent":["// Backend role types\nexport type UserRole = 'car_owner' | 'shop_owner' | 'insurance_company';\n\nexport interface SignupRequest {\n  email: string;\n  password: string;\n  confirmPassword: string;\n  first_name: string;\n  last_name: string;\n  role: UserRole;\n  phone_number?: string;\n  address?: string;\n  city?: string;\n  state?: string;\n  zip_code?: string;\n}\n\nexport interface LoginRequest {\n  email: string;\n  password: string;\n}\n\n// Role object from backend\nexport interface RoleInfo {\n  id: number;\n  name: UserRole;\n  description?: string;\n}\n\n// Raw user from backend\nexport interface BackendUser {\n  id: number;\n  email: string;\n  first_name: string;\n  last_name: string;\n  phone?: string;\n  phone_number?: string;\n  role: RoleInfo | UserRole;\n  email_verified?: boolean;\n  is_active?: boolean;\n  address?: string;\n  city?: string;\n  state?: string;\n  zip_code?: string;\n  created_at: string;\n  updated_at?: string;\n}\n\n// Normalized user for frontend use\nexport interface User {\n  id: number;\n  email: string;\n  first_name: string;\n  last_name: string;\n  name: string; // Combined name for display\n  role: UserRole;\n  phone_number?: string;\n  address?: string;\n  city?: string;\n  state?: string;\n  zip_code?: string;\n  email_verified?: boolean;\n  created_at: string;\n  updated_at?: string;\n}\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\n// Backend response structure\nexport interface BackendAuthResponse {\n  success: boolean;\n  message?: string;\n  data?: {\n    user?: BackendUser;\n    token?: string;\n    tokenType?: string;\n  };\n  error?: {\n    message: string;\n    details?: ValidationError[];\n  };\n}\n\nexport interface AuthResponse {\n  success: boolean;\n  message?: string;\n  data?: User;\n  token?: string;\n  error?: {\n    message: string;\n    details?: ValidationError[];\n  };\n}\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:5000';\n\n// Token management\nexport class TokenManager {\n  private static readonly TOKEN_KEY = 'motortrust_token';\n  private static readonly USER_KEY = 'motortrust_user';\n\n  static setToken(token: string): void {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem(this.TOKEN_KEY, token);\n    }\n  }\n\n  static getToken(): string | null {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem(this.TOKEN_KEY);\n    }\n    return null;\n  }\n\n  static removeToken(): void {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem(this.TOKEN_KEY);\n      localStorage.removeItem(this.USER_KEY);\n    }\n  }\n\n  static isAuthenticated(): boolean {\n    return this.getToken() !== null;\n  }\n\n  static setUser(user: User): void {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem(this.USER_KEY, JSON.stringify(user));\n    }\n  }\n\n  static getUser(): User | null {\n    if (typeof window !== 'undefined') {\n      const userStr = localStorage.getItem(this.USER_KEY);\n      if (userStr) {\n        try {\n          return JSON.parse(userStr);\n        } catch {\n          return null;\n        }\n      }\n    }\n    return null;\n  }\n}\n\n// Helper to normalize user data from backend\nfunction normalizeUser(backendUser: BackendUser): User {\n  // Handle role as object or string\n  const role: UserRole = typeof backendUser.role === 'object' \n    ? backendUser.role.name \n    : backendUser.role;\n\n  return {\n    id: backendUser.id,\n    email: backendUser.email,\n    first_name: backendUser.first_name,\n    last_name: backendUser.last_name,\n    name: `${backendUser.first_name} ${backendUser.last_name || ''}`.trim(),\n    role,\n    phone_number: backendUser.phone || backendUser.phone_number,\n    address: backendUser.address,\n    city: backendUser.city,\n    state: backendUser.state,\n    zip_code: backendUser.zip_code,\n    email_verified: backendUser.email_verified,\n    created_at: backendUser.created_at,\n    updated_at: backendUser.updated_at,\n  };\n}\n\n// Helper to format validation errors\nexport function formatValidationErrors(details: ValidationError[]): string {\n  return details.map(d => `${d.field}: ${d.message}`).join('\\n');\n}\n\nexport class AuthService {\n  private static getAuthHeader(): string {\n    const token = TokenManager.getToken();\n    if (!token) throw new Error('No authentication token found');\n    return `Bearer ${token}`;\n  }\n\n  static async signup(data: SignupRequest): Promise<AuthResponse> {\n    const response = await fetch(`${API_BASE_URL}/api/auth/signup`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    });\n\n    const result: BackendAuthResponse = await response.json();\n\n    if (!response.ok) {\n      // Handle validation errors\n      if (result.error?.details && Array.isArray(result.error.details)) {\n        const errorMessages = result.error.details.map((d: ValidationError) => d.message).join(', ');\n        throw new Error(errorMessages || result.error?.message || 'Signup failed');\n      }\n      throw new Error(result.error?.message || result.message || 'Signup failed');\n    }\n\n    // Store token - check both locations\n    const token = result.data?.token;\n    if (token) {\n      TokenManager.setToken(token);\n    }\n\n    // Normalize and store user\n    let normalizedUser: User | undefined;\n    if (result.data?.user) {\n      normalizedUser = normalizeUser(result.data.user);\n      TokenManager.setUser(normalizedUser);\n    }\n\n    return {\n      success: result.success,\n      message: result.message,\n      data: normalizedUser,\n      token,\n    };\n  }\n\n  static async login(data: LoginRequest): Promise<AuthResponse> {\n    const response = await fetch(`${API_BASE_URL}/api/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    });\n\n    const result: BackendAuthResponse = await response.json();\n\n    if (!response.ok) {\n      if (result.error?.details && Array.isArray(result.error.details)) {\n        const errorMessages = result.error.details.map((d: ValidationError) => d.message).join(', ');\n        throw new Error(errorMessages || result.error?.message || 'Login failed');\n      }\n      throw new Error(result.error?.message || result.message || 'Login failed');\n    }\n\n    // Store token - check both locations\n    const token = result.data?.token;\n    if (token) {\n      TokenManager.setToken(token);\n    }\n\n    // Normalize and store user\n    let normalizedUser: User | undefined;\n    if (result.data?.user) {\n      normalizedUser = normalizeUser(result.data.user);\n      TokenManager.setUser(normalizedUser);\n    }\n\n    return {\n      success: result.success,\n      message: result.message,\n      data: normalizedUser,\n      token,\n    };\n  }\n\n  static async getCurrentUser(): Promise<AuthResponse> {\n    // First try to get cached user\n    const cachedUser = TokenManager.getUser();\n    \n    // If no token, return cached user or throw\n    if (!TokenManager.isAuthenticated()) {\n      if (cachedUser) {\n        return { success: true, data: cachedUser };\n      }\n      throw new Error('No authentication token found');\n    }\n\n    try {\n      const authHeader = this.getAuthHeader();\n      const response = await fetch(`${API_BASE_URL}/api/auth/me`, {\n        method: 'GET',\n        headers: {\n          'Authorization': authHeader,\n        },\n      });\n\n      const result: BackendAuthResponse = await response.json();\n\n      if (!response.ok) {\n        // If token is invalid but we have cached user, return it\n        if (cachedUser) {\n          return { success: true, data: cachedUser };\n        }\n        throw new Error(result.error?.message || result.message || 'Failed to get user data');\n      }\n\n      // Normalize user\n      let normalizedUser: User | undefined;\n      if (result.data?.user) {\n        normalizedUser = normalizeUser(result.data.user);\n        TokenManager.setUser(normalizedUser);\n      } else if (result.data && 'email' in result.data) {\n        // Handle case where user is directly in data (not nested)\n        normalizedUser = normalizeUser(result.data as unknown as BackendUser);\n        TokenManager.setUser(normalizedUser);\n      }\n\n      return {\n        success: result.success,\n        message: result.message,\n        data: normalizedUser,\n      };\n    } catch (error) {\n      // If API call fails but we have cached user, return it\n      if (cachedUser) {\n        return { success: true, data: cachedUser };\n      }\n      throw error;\n    }\n  }\n\n  static async logout(): Promise<AuthResponse> {\n    try {\n      if (TokenManager.isAuthenticated()) {\n        const authHeader = this.getAuthHeader();\n        await fetch(`${API_BASE_URL}/api/auth/logout`, {\n          method: 'POST',\n          headers: {\n            'Authorization': authHeader,\n          },\n        });\n      }\n      return { success: true, message: 'Logout successful' };\n    } catch (error) {\n      console.error('Logout error:', error);\n      return { success: true, message: 'Logout successful' };\n    } finally {\n      // Always clear token on client side\n      TokenManager.removeToken();\n    }\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/erpai/projects/MotorTrust-Frontend/app/dashboard/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useMemo } from 'react';\r\nimport { AuthService, TokenManager, User, UserRole } from '@/lib/auth';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\ninterface SidebarItem {\r\n  icon: string;\r\n  label: string;\r\n  href: string;\r\n  roles?: UserRole[];\r\n}\r\n\r\nconst allSidebarItems: SidebarItem[] = [\r\n  { icon: 'üè†', label: 'Overview', href: '/dashboard' },\r\n  // Car owner items\r\n  { icon: 'üöó', label: 'My Vehicles', href: '/dashboard/vehicles', roles: ['car_owner'] },\r\n  { icon: 'üõ†Ô∏è', label: 'Request Repair', href: '/dashboard/requests', roles: ['car_owner'] },\r\n  { icon: 'üìú', label: 'Repair History', href: '/dashboard/repairs', roles: ['car_owner'] },\r\n  { icon: 'üîç', label: 'AI Diagnosis', href: '/dashboard/diagnosis', roles: ['car_owner'] },\r\n  { icon: 'üè™', label: 'Find Shops', href: '/dashboard/shops', roles: ['car_owner'] },\r\n  // Shop owner items\r\n  { icon: 'üè™', label: 'My Shop', href: '/dashboard/shop', roles: ['shop_owner'] },\r\n  { icon: 'üìã', label: 'Browse Leads', href: '/dashboard/leads', roles: ['shop_owner'] },\r\n  { icon: 'üíº', label: 'My Proposals', href: '/dashboard/proposals', roles: ['shop_owner'] },\r\n  { icon: 'üîß', label: 'Active Jobs', href: '/dashboard/jobs', roles: ['shop_owner'] },\r\n  { icon: 'üë•', label: 'Customers', href: '/dashboard/customers', roles: ['shop_owner'] },\r\n  // Insurance company items\r\n  { icon: 'üìÑ', label: 'Claims', href: '/dashboard/claims', roles: ['insurance_company'] },\r\n  { icon: 'üîç', label: 'Verify Repairs', href: '/dashboard/verify', roles: ['insurance_company'] },\r\n  { icon: 'üë•', label: 'Policyholders', href: '/dashboard/policyholders', roles: ['insurance_company'] },\r\n  // Common items\r\n  { icon: 'üìä', label: 'Reports', href: '/dashboard/reports' },\r\n  { icon: '‚öôÔ∏è', label: 'Settings', href: '/dashboard/settings' },\r\n];\r\n\r\nexport default function DashboardLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const loadUser = async () => {\r\n      try {\r\n        if (!TokenManager.isAuthenticated()) {\r\n          router.push('/signup');\r\n          return;\r\n        }\r\n\r\n        const response = await AuthService.getCurrentUser();\r\n        if (response.data) {\r\n          setUser(response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load user:', error);\r\n        TokenManager.removeToken();\r\n        router.push('/signup');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadUser();\r\n  }, [router]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await AuthService.logout();\r\n      router.push('/');\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      TokenManager.removeToken();\r\n      router.push('/');\r\n    }\r\n  };\r\n\r\n  // Filter sidebar items based on user role\r\n  const sidebarItems = useMemo(() => {\r\n    if (!user) return allSidebarItems.filter(item => !item.roles);\r\n    \r\n    return allSidebarItems.filter(item => {\r\n      // Show items with no role restriction\r\n      if (!item.roles) return true;\r\n      // Show items that include the user's role\r\n      return item.roles.includes(user.role);\r\n    });\r\n  }, [user]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-6xl mb-4 animate-float\">üöó</div>\r\n          <div className=\"flex items-center justify-center gap-2\">\r\n            <div className=\"w-2 h-2 bg-[#2ec8c6] rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\r\n            <div className=\"w-2 h-2 bg-[#2ec8c6] rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\r\n            <div className=\"w-2 h-2 bg-[#2ec8c6] rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-black text-white flex\">\r\n      {/* Background elements */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute top-20 left-10 w-72 h-72 bg-[#2ec8c6] rounded-full opacity-5 blur-3xl\"></div>\r\n        <div className=\"absolute bottom-20 right-10 w-96 h-96 bg-[#2ec8c6] rounded-full opacity-5 blur-3xl\"></div>\r\n        <div className=\"absolute top-1/2 left-1/2 w-[800px] h-[800px] bg-[#2ec8c6] rounded-full opacity-[0.02] blur-3xl transform -translate-x-1/2 -translate-y-1/2\"></div>\r\n      </div>\r\n\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black/60 z-40 lg:hidden\"\r\n          onClick={() => setSidebarOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <aside className={`\r\n        fixed lg:static inset-y-0 left-0 z-50\r\n        w-72 glass-strong border-r border-white/10\r\n        transform transition-transform duration-300 ease-in-out\r\n        ${sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}\r\n      `}>\r\n        <div className=\"flex flex-col h-full\">\r\n          {/* Logo */}\r\n          <div className=\"p-6 border-b border-white/10\">\r\n            <Link href=\"/\" className=\"flex items-center space-x-3\">\r\n              <div className=\"w-12 h-12 bg-gradient-to-br from-[#2ec8c6] to-[#1a9a99] rounded-xl flex items-center justify-center text-2xl shadow-lg shadow-[#2ec8c6]/20\">\r\n                üöó\r\n              </div>\r\n              <div>\r\n                <span className=\"text-xl font-bold gradient-text\">MotorTrust</span>\r\n                <p className=\"text-xs text-gray-500\">Vehicle Management</p>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n\r\n          {/* User info */}\r\n          <div className=\"p-4 mx-4 mt-4 glass rounded-xl\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-10 h-10 bg-gradient-to-br from-[#2ec8c6] to-[#1a9a99] rounded-full flex items-center justify-center text-lg font-bold\">\r\n                {user?.name?.charAt(0).toUpperCase()}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"font-semibold truncate\">{user?.name}</p>\r\n                <p className=\"text-xs text-[#2ec8c6] capitalize\">{user?.role?.replace('_', ' ')}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Navigation */}\r\n          <nav className=\"flex-1 p-4 space-y-1 overflow-y-auto\">\r\n            {sidebarItems.map((item) => {\r\n              const isActive = pathname === item.href || \r\n                (item.href !== '/dashboard' && pathname?.startsWith(item.href));\r\n              \r\n              return (\r\n                <Link\r\n                  key={item.href}\r\n                  href={item.href}\r\n                  onClick={() => setSidebarOpen(false)}\r\n                  className={`\r\n                    flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200\r\n                    ${isActive \r\n                      ? 'bg-[#2ec8c6]/20 text-[#2ec8c6] border border-[#2ec8c6]/30' \r\n                      : 'text-gray-400 hover:bg-white/5 hover:text-white'\r\n                    }\r\n                  `}\r\n                >\r\n                  <span className=\"text-xl\">{item.icon}</span>\r\n                  <span className=\"font-medium\">{item.label}</span>\r\n                  {isActive && (\r\n                    <div className=\"ml-auto w-1.5 h-1.5 bg-[#2ec8c6] rounded-full\"></div>\r\n                  )}\r\n                </Link>\r\n              );\r\n            })}\r\n          </nav>\r\n\r\n          {/* Logout button */}\r\n          <div className=\"p-4 border-t border-white/10\">\r\n            <button\r\n              onClick={handleLogout}\r\n              className=\"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-400 hover:bg-red-500/10 hover:text-red-400 transition-all duration-200\"\r\n            >\r\n              <span className=\"text-xl\">üö™</span>\r\n              <span className=\"font-medium\">Logout</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex-1 flex flex-col min-h-screen\">\r\n        {/* Top bar */}\r\n        <header className=\"sticky top-0 z-30 glass-strong border-b border-white/10\">\r\n          <div className=\"flex items-center justify-between px-6 py-4\">\r\n            {/* Mobile menu button */}\r\n            <button\r\n              onClick={() => setSidebarOpen(true)}\r\n              className=\"lg:hidden p-2 glass rounded-lg hover:bg-white/10 transition-colors\"\r\n            >\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\r\n              </svg>\r\n            </button>\r\n\r\n            {/* Page title - can be customized per page */}\r\n            <div className=\"hidden lg:block\">\r\n              <h1 className=\"text-xl font-bold\">\r\n                {pathname === '/dashboard' && 'Dashboard Overview'}\r\n                {pathname === '/dashboard/vehicles' && 'My Vehicles'}\r\n                {pathname?.startsWith('/dashboard/vehicles/') && 'Vehicle Details'}\r\n                {pathname === '/dashboard/requests' && 'Request Repair'}\r\n                {pathname?.startsWith('/dashboard/requests/') && 'Request Details'}\r\n                {pathname === '/dashboard/repairs' && 'Repair History'}\r\n                {pathname?.startsWith('/dashboard/repairs/') && 'Repair Details'}\r\n                {pathname === '/dashboard/diagnosis' && 'AI Diagnosis'}\r\n                {pathname === '/dashboard/shops' && 'Find Repair Shops'}\r\n                {pathname === '/dashboard/shop' && 'My Shop'}\r\n                {pathname === '/dashboard/shop/setup' && 'Shop Setup'}\r\n                {pathname === '/dashboard/leads' && 'Browse Leads'}\r\n                {pathname?.startsWith('/dashboard/leads/') && 'Lead Details'}\r\n                {pathname === '/dashboard/proposals' && 'My Proposals'}\r\n                {pathname === '/dashboard/jobs' && 'Active Jobs'}\r\n                {pathname === '/dashboard/customers' && 'Customers'}\r\n                {pathname === '/dashboard/reports' && 'Reports & Analytics'}\r\n                {pathname === '/dashboard/settings' && 'Settings'}\r\n              </h1>\r\n            </div>\r\n\r\n            {/* Right side actions */}\r\n            <div className=\"flex items-center space-x-4\">\r\n              {/* Notifications */}\r\n              <button className=\"relative p-2 glass rounded-lg hover:bg-white/10 transition-colors\">\r\n                <span className=\"text-xl\">üîî</span>\r\n                <span className=\"absolute top-1 right-1 w-2 h-2 bg-[#2ec8c6] rounded-full\"></span>\r\n              </button>\r\n\r\n              {/* User avatar (mobile) */}\r\n              <div className=\"lg:hidden w-10 h-10 bg-gradient-to-br from-[#2ec8c6] to-[#1a9a99] rounded-full flex items-center justify-center text-lg font-bold\">\r\n                {user?.name?.charAt(0).toUpperCase()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Page content */}\r\n        <main className=\"flex-1 p-6 relative z-10\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}