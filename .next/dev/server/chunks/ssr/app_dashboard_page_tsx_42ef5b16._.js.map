{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/erpai/projects/MotorTrust-Frontend/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { AuthService, TokenManager, User } from '@/lib/auth';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function Dashboard() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadUser = async () => {\r\n      try {\r\n        if (!TokenManager.isAuthenticated()) {\r\n          router.push('/signup');\r\n          return;\r\n        }\r\n\r\n        const response = await AuthService.getCurrentUser();\r\n        if (response.data) {\r\n          setUser(response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load user:', error);\r\n        TokenManager.removeToken();\r\n        router.push('/signup');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadUser();\r\n  }, [router]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await AuthService.logout();\r\n      router.push('/');\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      // Still redirect even if logout API fails\r\n      TokenManager.removeToken();\r\n      router.push('/');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-6xl mb-4 animate-float\">üöó</div>\r\n          <p className=\"text-gray-400\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-black text-white\">\r\n      {/* Background elements */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute top-20 left-10 w-72 h-72 bg-[#2ec8c6] rounded-full opacity-10 blur-3xl animate-float\"></div>\r\n        <div className=\"absolute bottom-20 right-10 w-96 h-96 bg-[#2ec8c6] rounded-full opacity-10 blur-3xl animate-float\" style={{ animationDelay: '2s' }}></div>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <nav className=\"relative z-50 glass-strong\">\r\n        <div className=\"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-10 h-10 bg-gradient-to-br from-[#2ec8c6] to-[#1a9a99] rounded-lg flex items-center justify-center text-2xl\">\r\n              üöó\r\n            </div>\r\n            <span className=\"text-2xl font-bold gradient-text\">MotorTrust</span>\r\n          </div>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"glass hover:glass-strong text-white font-semibold px-6 py-2 rounded-full transition-all transform hover:scale-105\"\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </nav>\r\n\r\n      <div className=\"relative z-10 max-w-7xl mx-auto px-6 py-12\">\r\n        {/* Welcome Section */}\r\n        <div className=\"glass-strong rounded-3xl p-8 md:p-12 mb-8\">\r\n          <h1 className=\"text-5xl font-bold gradient-text mb-4\">\r\n            Welcome back, {user?.name}!\r\n          </h1>\r\n          <p className=\"text-gray-400 text-xl\">\r\n            You&apos;re logged in as a <span className=\"text-[#2ec8c6] font-semibold capitalize\">{user?.role.replace('_', ' ')}</span>\r\n          </p>\r\n        </div>\r\n\r\n        {/* User Info Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\r\n          <div className=\"glass rounded-2xl p-6\">\r\n            <div className=\"text-4xl mb-4\">üìß</div>\r\n            <div className=\"text-gray-400 text-sm mb-1\">Email</div>\r\n            <div className=\"font-semibold\">{user?.email}</div>\r\n          </div>\r\n\r\n          {user?.phone_number && (\r\n            <div className=\"glass rounded-2xl p-6\">\r\n              <div className=\"text-4xl mb-4\">üì±</div>\r\n              <div className=\"text-gray-400 text-sm mb-1\">Phone</div>\r\n              <div className=\"font-semibold\">{user.phone_number}</div>\r\n            </div>\r\n          )}\r\n\r\n          {user?.city && user?.state && (\r\n            <div className=\"glass rounded-2xl p-6\">\r\n              <div className=\"text-4xl mb-4\">üìç</div>\r\n              <div className=\"text-gray-400 text-sm mb-1\">Location</div>\r\n              <div className=\"font-semibold\">{user.city}, {user.state}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        <div className=\"glass-strong rounded-3xl p-8\">\r\n          <h2 className=\"text-3xl font-bold mb-6\">Quick Actions</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            {[\r\n              { icon: 'üöó', title: 'Add Vehicle', desc: 'Register a new vehicle' },\r\n              { icon: 'üîç', title: 'AI Diagnosis', desc: 'Get instant diagnosis' },\r\n              { icon: 'üîß', title: 'Find Repair Shop', desc: 'Connect with shops' },\r\n              { icon: 'üìä', title: 'View History', desc: 'Check service records' }\r\n            ].map((action, idx) => (\r\n              <button\r\n                key={idx}\r\n                className=\"glass hover:glass-strong rounded-xl p-6 text-left transition-all transform hover:scale-105 hover:glow\"\r\n              >\r\n                <div className=\"text-4xl mb-3\">{action.icon}</div>\r\n                <div className=\"font-bold text-lg mb-1\">{action.title}</div>\r\n                <div className=\"text-gray-400 text-sm\">{action.desc}</div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}