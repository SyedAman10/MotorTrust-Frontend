{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/erpai/projects/MotorTrust-Frontend/app/dashboard/customers/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { AuthService, User } from '@/lib/auth';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface Customer {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  phone: string;\r\n  vehicleCount: number;\r\n  totalSpent: number;\r\n  lastVisit: string;\r\n}\r\n\r\nconst mockCustomers: Customer[] = [\r\n  {\r\n    id: 1,\r\n    name: 'John Smith',\r\n    email: 'john@example.com',\r\n    phone: '+1234567890',\r\n    vehicleCount: 2,\r\n    totalSpent: 1250,\r\n    lastVisit: '2024-01-18',\r\n  },\r\n  {\r\n    id: 2,\r\n    name: 'Jane Doe',\r\n    email: 'jane@example.com',\r\n    phone: '+1234567891',\r\n    vehicleCount: 1,\r\n    totalSpent: 450,\r\n    lastVisit: '2024-01-15',\r\n  },\r\n  {\r\n    id: 3,\r\n    name: 'Mike Johnson',\r\n    email: 'mike@example.com',\r\n    phone: '+1234567892',\r\n    vehicleCount: 3,\r\n    totalSpent: 2800,\r\n    lastVisit: '2024-01-20',\r\n  },\r\n];\r\n\r\nexport default function CustomersPage() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [customers] = useState<Customer[]>(mockCustomers);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  useEffect(() => {\r\n    checkAccess();\r\n  }, []);\r\n\r\n  const checkAccess = async () => {\r\n    try {\r\n      const response = await AuthService.getCurrentUser();\r\n      if (response.data) {\r\n        setUser(response.data);\r\n        if (response.data.role !== 'repair_shop') {\r\n          router.push('/dashboard');\r\n          return;\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Access check failed:', err);\r\n      router.push('/dashboard');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredCustomers = customers.filter(customer =>\r\n    customer.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    customer.email.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-4xl mb-4 animate-float\">üë•</div>\r\n          <p className=\"text-gray-400\">Loading customers...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (user?.role !== 'repair_shop') {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-6xl mb-4\">üîí</div>\r\n        <h2 className=\"text-2xl font-bold mb-2\">Access Denied</h2>\r\n        <p className=\"text-gray-400\">Only repair shops can access this page</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold gradient-text\">Customers</h1>\r\n          <p className=\"text-gray-400 mt-1\">Manage your customer relationships</p>\r\n        </div>\r\n        <div className=\"relative\">\r\n          <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\">üîç</span>\r\n          <input\r\n            type=\"text\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            placeholder=\"Search customers...\"\r\n            className=\"pl-12 pr-4 py-3 glass rounded-xl bg-transparent border border-gray-700 focus:border-[#2ec8c6] focus:outline-none w-64\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <div className=\"glass-strong rounded-xl p-5\">\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <span className=\"text-2xl\">üë•</span>\r\n            <span className=\"text-gray-400 text-sm\">Total Customers</span>\r\n          </div>\r\n          <div className=\"text-3xl font-bold\">{customers.length}</div>\r\n        </div>\r\n        <div className=\"glass-strong rounded-xl p-5\">\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <span className=\"text-2xl\">üöó</span>\r\n            <span className=\"text-gray-400 text-sm\">Vehicles Serviced</span>\r\n          </div>\r\n          <div className=\"text-3xl font-bold\">\r\n            {customers.reduce((acc, c) => acc + c.vehicleCount, 0)}\r\n          </div>\r\n        </div>\r\n        <div className=\"glass-strong rounded-xl p-5\">\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <span className=\"text-2xl\">üí∞</span>\r\n            <span className=\"text-gray-400 text-sm\">Total Revenue</span>\r\n          </div>\r\n          <div className=\"text-3xl font-bold text-[#2ec8c6]\">\r\n            ${customers.reduce((acc, c) => acc + c.totalSpent, 0).toLocaleString()}\r\n          </div>\r\n        </div>\r\n        <div className=\"glass-strong rounded-xl p-5\">\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <span className=\"text-2xl\">üìä</span>\r\n            <span className=\"text-gray-400 text-sm\">Avg per Customer</span>\r\n          </div>\r\n          <div className=\"text-3xl font-bold\">\r\n            ${Math.round(customers.reduce((acc, c) => acc + c.totalSpent, 0) / customers.length)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Customers List */}\r\n      {filteredCustomers.length === 0 ? (\r\n        <div className=\"glass-strong rounded-2xl p-12 text-center\">\r\n          <div className=\"text-6xl mb-6\">üë•</div>\r\n          <h2 className=\"text-2xl font-bold mb-3\">No customers found</h2>\r\n          <p className=\"text-gray-400\">\r\n            {searchQuery ? 'Try a different search term' : 'Complete jobs to build your customer base'}\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"glass-strong rounded-2xl overflow-hidden\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead>\r\n                <tr className=\"text-left text-gray-400 text-sm border-b border-white/10\">\r\n                  <th className=\"p-4 font-medium\">Customer</th>\r\n                  <th className=\"p-4 font-medium\">Contact</th>\r\n                  <th className=\"p-4 font-medium\">Vehicles</th>\r\n                  <th className=\"p-4 font-medium\">Total Spent</th>\r\n                  <th className=\"p-4 font-medium\">Last Visit</th>\r\n                  <th className=\"p-4 font-medium\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredCustomers.map((customer) => (\r\n                  <tr key={customer.id} className=\"border-b border-white/5 hover:bg-white/5\">\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-[#2ec8c6] to-[#1a9a99] rounded-full flex items-center justify-center text-lg font-bold\">\r\n                          {customer.name.charAt(0)}\r\n                        </div>\r\n                        <div className=\"font-semibold\">{customer.name}</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"p-4\">\r\n                      <div className=\"text-sm\">\r\n                        <div>{customer.email}</div>\r\n                        <div className=\"text-gray-400\">{customer.phone}</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"p-4 font-semibold\">{customer.vehicleCount}</td>\r\n                    <td className=\"p-4 font-bold text-[#2ec8c6]\">${customer.totalSpent}</td>\r\n                    <td className=\"p-4\">\r\n                      {new Date(customer.lastVisit).toLocaleDateString()}\r\n                    </td>\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex gap-2\">\r\n                        <button className=\"px-3 py-1.5 glass rounded-lg hover:bg-white/10 transition-colors text-sm\">\r\n                          View\r\n                        </button>\r\n                        <a\r\n                          href={`tel:${customer.phone}`}\r\n                          className=\"px-3 py-1.5 glass rounded-lg hover:bg-white/10 transition-colors text-sm\"\r\n                        >\r\n                          üìû\r\n                        </a>\r\n                        <a\r\n                          href={`mailto:${customer.email}`}\r\n                          className=\"px-3 py-1.5 glass rounded-lg hover:bg-white/10 transition-colors text-sm\"\r\n                        >\r\n                          ‚úâÔ∏è\r\n                        </a>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}