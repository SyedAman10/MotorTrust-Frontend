{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/erpai/projects/MotorTrust-Frontend/lib/vehicles.ts"],"sourcesContent":["import { TokenManager } from './auth';\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:5000';\r\n\r\nexport interface Vehicle {\r\n  id: number;\r\n  user_id: number;\r\n  vin: string;\r\n  year: number;\r\n  make: string;\r\n  model: string;\r\n  trim?: string;\r\n  color?: string;\r\n  license_plate?: string;\r\n  mileage: number;\r\n  purchase_date?: string;\r\n  is_primary: boolean;\r\n  repair_count?: number;\r\n  last_service_date?: string;\r\n  total_repair_cost?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface VehicleStats {\r\n  id: number;\r\n  year: number;\r\n  make: string;\r\n  model: string;\r\n  current_mileage: number;\r\n  total_repairs: number;\r\n  total_cost: string;\r\n  avg_repair_cost: string;\r\n  last_service_date?: string;\r\n  first_service_date?: string;\r\n}\r\n\r\nexport interface RepairRecord {\r\n  id: number;\r\n  vehicle_id: number;\r\n  service_date: string;\r\n  service_type: string;\r\n  description: string;\r\n  total_cost: string;\r\n  shop_name?: string;\r\n  shop_rating?: number;\r\n}\r\n\r\nexport interface CreateVehicleRequest {\r\n  vin: string;\r\n  year: number;\r\n  make: string;\r\n  model: string;\r\n  trim?: string;\r\n  color?: string;\r\n  license_plate?: string;\r\n  mileage: number;\r\n  purchase_date?: string;\r\n  is_primary?: boolean;\r\n}\r\n\r\nexport interface UpdateVehicleRequest {\r\n  mileage?: number;\r\n  color?: string;\r\n  license_plate?: string;\r\n  trim?: string;\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data?: T;\r\n  count?: number;\r\n}\r\n\r\nexport class VehicleService {\r\n  private static getAuthHeader(): string {\r\n    const token = TokenManager.getToken();\r\n    if (!token) throw new Error('No authentication token found');\r\n    return `Bearer ${token}`;\r\n  }\r\n\r\n  // Get all vehicles\r\n  static async getVehicles(): Promise<ApiResponse<Vehicle[]>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to fetch vehicles');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Get primary vehicle\r\n  static async getPrimaryVehicle(): Promise<ApiResponse<Vehicle>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles/primary`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to fetch primary vehicle');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Get vehicle by ID\r\n  static async getVehicle(id: number): Promise<ApiResponse<Vehicle>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles/${id}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to fetch vehicle');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Create vehicle\r\n  static async createVehicle(data: CreateVehicleRequest): Promise<ApiResponse<Vehicle>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to create vehicle');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Update vehicle\r\n  static async updateVehicle(id: number, data: UpdateVehicleRequest): Promise<ApiResponse<Vehicle>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles/${id}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to update vehicle');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Delete vehicle\r\n  static async deleteVehicle(id: number): Promise<ApiResponse<Vehicle>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to delete vehicle');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Set primary vehicle\r\n  static async setPrimaryVehicle(id: number): Promise<ApiResponse<Vehicle>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles/${id}/primary`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to set primary vehicle');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Get vehicle repairs\r\n  static async getVehicleRepairs(id: number): Promise<ApiResponse<RepairRecord[]>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles/${id}/repairs`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to fetch vehicle repairs');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Get vehicle statistics\r\n  static async getVehicleStats(id: number): Promise<ApiResponse<VehicleStats>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/vehicles/${id}/stats`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.message || 'Failed to fetch vehicle stats');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/erpai/projects/MotorTrust-Frontend/lib/ai-diagnosis.ts"],"sourcesContent":["// AI Diagnosis Service\r\nimport { TokenManager } from './auth';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\nexport interface DiagnosisRequest {\r\n  message: string;\r\n  car_make?: string;\r\n  car_model?: string;\r\n  car_year?: number;\r\n}\r\n\r\nexport interface DiagnosisResponse {\r\n  diagnosis: string;\r\n  tokensUsed: number;\r\n  model: string;\r\n}\r\n\r\nexport interface HealthStatus {\r\n  status: string;\r\n  model?: string;\r\n  message?: string;\r\n}\r\n\r\ninterface ApiResponse<T> {\r\n  success: boolean;\r\n  data?: T;\r\n  message?: string;\r\n  error?: {\r\n    message: string;\r\n  };\r\n}\r\n\r\nexport class AIDiagnosisService {\r\n  private static getAuthHeader(): string {\r\n    const token = TokenManager.getToken();\r\n    if (!token) throw new Error('Please log in to use AI Diagnosis');\r\n    return `Bearer ${token}`;\r\n  }\r\n\r\n  // Full diagnosis with car details\r\n  static async getDiagnosis(data: DiagnosisRequest): Promise<ApiResponse<DiagnosisResponse>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/ai-diagnosis`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error?.message || error.message || 'Failed to get diagnosis');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Quick diagnosis without car details\r\n  static async getQuickDiagnosis(message: string): Promise<ApiResponse<DiagnosisResponse>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/ai-diagnosis/quick`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n      body: JSON.stringify({ message }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error?.message || error.message || 'Failed to get diagnosis');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // Check service health\r\n  static async checkHealth(): Promise<ApiResponse<HealthStatus>> {\r\n    const response = await fetch(`${API_BASE_URL}/api/ai-diagnosis/health`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': this.getAuthHeader(),\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error?.message || error.message || 'Failed to check service health');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AACvB;;AAEA,MAAM,eAAe;AA8Bd,MAAM;IACX,OAAe,gBAAwB;QACrC,MAAM,QAAQ,2HAAY,CAAC,QAAQ;QACnC,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM;QAC5B,OAAO,CAAC,OAAO,EAAE,OAAO;IAC1B;IAEA,kCAAkC;IAClC,aAAa,aAAa,IAAsB,EAA2C;QACzF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,iBAAiB,CAAC,EAAE;YAC/D,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB,IAAI,CAAC,aAAa;YACrC;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;YACjC,MAAM,IAAI,MAAM,MAAM,KAAK,EAAE,WAAW,MAAM,OAAO,IAAI;QAC3D;QAEA,OAAO,SAAS,IAAI;IACtB;IAEA,sCAAsC;IACtC,aAAa,kBAAkB,OAAe,EAA2C;QACvF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,uBAAuB,CAAC,EAAE;YACrE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB,IAAI,CAAC,aAAa;YACrC;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;YAAQ;QACjC;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;YACjC,MAAM,IAAI,MAAM,MAAM,KAAK,EAAE,WAAW,MAAM,OAAO,IAAI;QAC3D;QAEA,OAAO,SAAS,IAAI;IACtB;IAEA,uBAAuB;IACvB,aAAa,cAAkD;QAC7D,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,wBAAwB,CAAC,EAAE;YACtE,QAAQ;YACR,SAAS;gBACP,iBAAiB,IAAI,CAAC,aAAa;YACrC;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;YACjC,MAAM,IAAI,MAAM,MAAM,KAAK,EAAE,WAAW,MAAM,OAAO,IAAI;QAC3D;QAEA,OAAO,SAAS,IAAI;IACtB;AACF"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/erpai/projects/MotorTrust-Frontend/app/dashboard/diagnosis/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport { AuthService, User } from '@/lib/auth';\r\nimport { VehicleService, Vehicle } from '@/lib/vehicles';\r\nimport { AIDiagnosisService, DiagnosisRequest } from '@/lib/ai-diagnosis';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface Message {\r\n  id: string;\r\n  role: 'user' | 'assistant' | 'system';\r\n  content: string;\r\n  timestamp: Date;\r\n  carInfo?: {\r\n    make: string;\r\n    model: string;\r\n    year: number;\r\n  };\r\n}\r\n\r\nexport default function DiagnosisPage() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [vehicles, setVehicles] = useState<Vehicle[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedVehicle, setSelectedVehicle] = useState<Vehicle | null>(null);\r\n  const [useQuickMode, setUseQuickMode] = useState(false);\r\n  \r\n  // Chat state\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [serviceStatus, setServiceStatus] = useState<'online' | 'offline' | 'checking'>('checking');\r\n  \r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLTextAreaElement>(null);\r\n  const fetchedRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (fetchedRef.current) return;\r\n    fetchedRef.current = true;\r\n\r\n    const initPage = async () => {\r\n      try {\r\n        const response = await AuthService.getCurrentUser();\r\n        \r\n        if (!response.success || !response.data) {\r\n          router.push('/signup');\r\n          return;\r\n        }\r\n\r\n        const currentUser = response.data;\r\n        \r\n        // Only car owners can use this feature\r\n        // Handle role as object or string\r\n        const userRole = typeof currentUser.role === 'object' \r\n          ? (currentUser.role as { name: string }).name \r\n          : currentUser.role;\r\n        \r\n        if (userRole !== 'car_owner') {\r\n          router.push('/dashboard');\r\n          return;\r\n        }\r\n\r\n        setUser(currentUser);\r\n        \r\n        // Add welcome message\r\n        setMessages([{\r\n          id: 'welcome',\r\n          role: 'assistant',\r\n          content: `üëã Hi ${currentUser.first_name}! I'm your AI Car Diagnostic Assistant.\\n\\nDescribe any issue you're experiencing with your vehicle, and I'll help you understand what might be wrong, how urgent it is, and give you an estimated repair cost.\\n\\n**Tips for better diagnosis:**\\n‚Ä¢ Be specific about when the issue occurs\\n‚Ä¢ Mention any sounds, smells, or warning lights\\n‚Ä¢ Select your vehicle above for more accurate results`,\r\n          timestamp: new Date(),\r\n        }]);\r\n        \r\n        // Fetch vehicles and check service status\r\n        await Promise.all([\r\n          fetchVehicles(),\r\n          checkServiceHealth(),\r\n        ]);\r\n      } catch (err) {\r\n        console.error('Failed to initialize:', err);\r\n        router.push('/signup');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    initPage();\r\n  }, [router]);\r\n\r\n  const fetchVehicles = async () => {\r\n    try {\r\n      const response = await VehicleService.getVehicles();\r\n      if (response.success && response.data) {\r\n        // Handle both array and object response formats\r\n        const vehiclesList = Array.isArray(response.data) \r\n          ? response.data \r\n          : (response.data as unknown as { vehicles?: Vehicle[] }).vehicles || [];\r\n        setVehicles(vehiclesList);\r\n        if (vehiclesList.length > 0) {\r\n          setSelectedVehicle(vehiclesList[0]);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch vehicles:', err);\r\n    }\r\n  };\r\n\r\n  const checkServiceHealth = async () => {\r\n    try {\r\n      const response = await AIDiagnosisService.checkHealth();\r\n      setServiceStatus(response.success ? 'online' : 'online'); // Always show online, we'll handle errors during actual diagnosis\r\n    } catch {\r\n      // Don't block users - they can still try to use the service\r\n      // The actual diagnosis call will show an error if the service is truly down\r\n      setServiceStatus('online');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!inputMessage.trim() || isTyping) return;\r\n\r\n    const userMessage: Message = {\r\n      id: `user-${Date.now()}`,\r\n      role: 'user',\r\n      content: inputMessage.trim(),\r\n      timestamp: new Date(),\r\n      carInfo: selectedVehicle && !useQuickMode ? {\r\n        make: selectedVehicle.make,\r\n        model: selectedVehicle.model,\r\n        year: selectedVehicle.year,\r\n      } : undefined,\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputMessage('');\r\n    setIsTyping(true);\r\n\r\n    try {\r\n      let response;\r\n      \r\n      if (useQuickMode || !selectedVehicle) {\r\n        response = await AIDiagnosisService.getQuickDiagnosis(userMessage.content);\r\n      } else {\r\n        const diagnosisRequest: DiagnosisRequest = {\r\n          message: userMessage.content,\r\n          car_make: selectedVehicle.make,\r\n          car_model: selectedVehicle.model,\r\n          car_year: selectedVehicle.year,\r\n        };\r\n        response = await AIDiagnosisService.getDiagnosis(diagnosisRequest);\r\n      }\r\n\r\n      if (response.success && response.data) {\r\n        const assistantMessage: Message = {\r\n          id: `assistant-${Date.now()}`,\r\n          role: 'assistant',\r\n          content: response.data.diagnosis,\r\n          timestamp: new Date(),\r\n        };\r\n        setMessages(prev => [...prev, assistantMessage]);\r\n      } else {\r\n        throw new Error('Failed to get diagnosis');\r\n      }\r\n    } catch (err) {\r\n      const errorMessage: Message = {\r\n        id: `error-${Date.now()}`,\r\n        role: 'system',\r\n        content: `‚ùå ${err instanceof Error ? err.message : 'Failed to get diagnosis. Please try again.'}`,\r\n        timestamp: new Date(),\r\n      };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  const clearChat = () => {\r\n    setMessages([{\r\n      id: 'welcome-new',\r\n      role: 'assistant',\r\n      content: `üîÑ Chat cleared! Ready for a new diagnosis.\\n\\nDescribe your car issue and I'll help you understand what might be wrong.`,\r\n      timestamp: new Date(),\r\n    }]);\r\n  };\r\n\r\n  const suggestedQuestions = [\r\n    \"My car is making a grinding noise when I brake\",\r\n    \"Check engine light is on\",\r\n    \"Car won't start, just clicking sound\",\r\n    \"Steering wheel vibrates at high speed\",\r\n    \"I smell burning when driving\",\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-12 h-12 border-4 border-[#2ec8c6] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-400\">Loading AI Diagnosis...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-[calc(100vh-12rem)] flex flex-col\">\r\n      {/* Header with Mode Selection */}\r\n      <div className=\"glass rounded-2xl p-4 mb-4\">\r\n        {/* Mode Toggle */}\r\n        <div className=\"flex flex-col lg:flex-row gap-4\">\r\n          {/* Mode Selection Buttons */}\r\n          <div className=\"flex-1\">\r\n            <label className=\"block text-sm text-gray-400 mb-2\">Diagnosis Mode</label>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => setUseQuickMode(false)}\r\n                className={`flex-1 px-4 py-3 rounded-xl font-semibold transition-all ${\r\n                  !useQuickMode \r\n                    ? 'bg-gradient-to-r from-[#2ec8c6] to-[#1a9a99] text-black' \r\n                    : 'glass hover:bg-white/10'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center justify-center gap-2\">\r\n                  <span>üöó</span>\r\n                  <span>Vehicle-Specific</span>\r\n                </div>\r\n              </button>\r\n              <button\r\n                onClick={() => setUseQuickMode(true)}\r\n                className={`flex-1 px-4 py-3 rounded-xl font-semibold transition-all ${\r\n                  useQuickMode \r\n                    ? 'bg-gradient-to-r from-[#2ec8c6] to-[#1a9a99] text-black' \r\n                    : 'glass hover:bg-white/10'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center justify-center gap-2\">\r\n                  <span>‚ö°</span>\r\n                  <span>Quick Mode</span>\r\n                </div>\r\n              </button>\r\n            </div>\r\n            \r\n            {/* Mode Description */}\r\n            <div className=\"mt-3 p-3 glass rounded-lg\">\r\n              {useQuickMode ? (\r\n                <div className=\"flex items-start gap-2 text-sm\">\r\n                  <span className=\"text-xl\">‚ö°</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-[#2ec8c6]\">Quick Mode</p>\r\n                    <p className=\"text-gray-400\">Get instant diagnosis without specifying your vehicle. Great for general car questions and common issues.</p>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex items-start gap-2 text-sm\">\r\n                  <span className=\"text-xl\">üöó</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-[#2ec8c6]\">Vehicle-Specific Mode</p>\r\n                    <p className=\"text-gray-400\">Get personalized diagnosis based on your specific vehicle&apos;s make, model, and year for more accurate results.</p>\r\n                    \r\n                    {/* Vehicle Selector - only show when not in Quick Mode */}\r\n                    {vehicles.length > 0 ? (\r\n                      <select\r\n                        value={selectedVehicle?.id || ''}\r\n                        onChange={(e) => {\r\n                          const vehicle = vehicles.find(v => v.id === parseInt(e.target.value));\r\n                          setSelectedVehicle(vehicle || null);\r\n                        }}\r\n                        className=\"mt-2 w-full glass rounded-lg px-4 py-2 bg-transparent border border-gray-700 focus:border-[#2ec8c6] focus:outline-none\"\r\n                      >\r\n                        {vehicles.map(vehicle => (\r\n                          <option key={vehicle.id} value={vehicle.id} className=\"bg-gray-900\">\r\n                            {vehicle.year} {vehicle.make} {vehicle.model}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    ) : (\r\n                      <div className=\"mt-2 text-yellow-400\">\r\n                        ‚ö†Ô∏è No vehicles found. <a href=\"/dashboard/vehicles\" className=\"text-[#2ec8c6] hover:underline\">Add a vehicle</a> or use Quick Mode.\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Status & Actions */}\r\n          <div className=\"flex lg:flex-col items-center lg:items-end gap-3\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className={`w-2 h-2 rounded-full ${\r\n                serviceStatus === 'online' ? 'bg-green-500' :\r\n                serviceStatus === 'offline' ? 'bg-yellow-500' : 'bg-yellow-500 animate-pulse'\r\n              }`}></div>\r\n              <span className=\"text-sm text-gray-400\">\r\n                {serviceStatus === 'online' ? 'AI Ready' :\r\n                 serviceStatus === 'offline' ? 'Connecting...' : 'Checking...'}\r\n              </span>\r\n            </div>\r\n            <button\r\n              onClick={clearChat}\r\n              className=\"px-4 py-2 glass rounded-lg hover:bg-white/10 transition-colors text-sm\"\r\n            >\r\n              Clear Chat\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Container */}\r\n      <div className=\"flex-1 glass rounded-2xl flex flex-col overflow-hidden\">\r\n        {/* Messages Area */}\r\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n          {messages.map((message) => (\r\n            <div\r\n              key={message.id}\r\n              className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\r\n            >\r\n              <div\r\n                className={`max-w-[80%] rounded-2xl p-4 ${\r\n                  message.role === 'user'\r\n                    ? 'bg-gradient-to-r from-[#2ec8c6] to-[#1a9a99] text-black'\r\n                    : message.role === 'system'\r\n                    ? 'bg-red-500/20 border border-red-500/30'\r\n                    : 'glass-strong'\r\n                }`}\r\n              >\r\n                {/* Car info badge for user messages */}\r\n                {message.carInfo && (\r\n                  <div className=\"text-xs opacity-70 mb-2 flex items-center gap-1\">\r\n                    <span>üöó</span>\r\n                    {message.carInfo.year} {message.carInfo.make} {message.carInfo.model}\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Message content with markdown-like formatting */}\r\n                <div className=\"whitespace-pre-wrap leading-relaxed\">\r\n                  {message.content.split('\\n').map((line, i) => {\r\n                    // Bold text\r\n                    const formattedLine = line.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\r\n                    return (\r\n                      <p \r\n                        key={i} \r\n                        className={line === '' ? 'h-2' : ''}\r\n                        dangerouslySetInnerHTML={{ __html: formattedLine }}\r\n                      />\r\n                    );\r\n                  })}\r\n                </div>\r\n                \r\n                {/* Timestamp */}\r\n                <div className={`text-xs mt-2 ${\r\n                  message.role === 'user' ? 'text-black/60' : 'text-gray-500'\r\n                }`}>\r\n                  {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {/* Typing indicator */}\r\n          {isTyping && (\r\n            <div className=\"flex justify-start\">\r\n              <div className=\"glass-strong rounded-2xl p-4 flex items-center gap-2\">\r\n                <div className=\"flex gap-1\">\r\n                  <div className=\"w-2 h-2 bg-[#2ec8c6] rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\r\n                  <div className=\"w-2 h-2 bg-[#2ec8c6] rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\r\n                  <div className=\"w-2 h-2 bg-[#2ec8c6] rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\r\n                </div>\r\n                <span className=\"text-gray-400 text-sm\">AI is analyzing...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Suggested Questions */}\r\n        {messages.length <= 1 && (\r\n          <div className=\"px-6 pb-4\">\r\n            <p className=\"text-sm text-gray-400 mb-2\">Try asking:</p>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {suggestedQuestions.map((question, index) => (\r\n                <button\r\n                  key={index}\r\n                  onClick={() => setInputMessage(question)}\r\n                  className=\"px-3 py-1.5 glass rounded-full text-sm hover:bg-white/10 transition-colors\"\r\n                >\r\n                  {question}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Input Area */}\r\n        <div className=\"border-t border-gray-700 p-4\">\r\n          <form onSubmit={handleSubmit} className=\"flex gap-3\">\r\n            <div className=\"flex-1 relative\">\r\n              <textarea\r\n                ref={inputRef}\r\n                value={inputMessage}\r\n                onChange={(e) => setInputMessage(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                placeholder=\"Describe your car issue... (e.g., 'My brakes are squeaking')\"\r\n                disabled={isTyping}\r\n                rows={1}\r\n                className=\"w-full glass rounded-xl px-4 py-3 pr-12 bg-transparent border border-gray-700 focus:border-[#2ec8c6] focus:outline-none resize-none disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                style={{ minHeight: '48px', maxHeight: '120px' }}\r\n              />\r\n              <div className=\"absolute right-3 bottom-3 text-xs text-gray-500\">\r\n                {inputMessage.length > 0 && `${inputMessage.length} chars`}\r\n              </div>\r\n            </div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={!inputMessage.trim() || isTyping}\r\n              className=\"px-6 py-3 bg-gradient-to-r from-[#2ec8c6] to-[#1a9a99] rounded-xl font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n            >\r\n              {isTyping ? (\r\n                <>\r\n                  <div className=\"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin\"></div>\r\n                  <span>Analyzing</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <span>üîç</span>\r\n                  <span>Diagnose</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </form>\r\n          <p className=\"text-xs text-gray-500 mt-2 text-center\">\r\n            üí° AI diagnosis is for informational purposes only. Always consult a professional mechanic for accurate assessment.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}